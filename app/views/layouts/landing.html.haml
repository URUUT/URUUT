!!!
%html{:itemscope => "", :itemtype => "http://schema.org/LocalBusiness", :xmlns => "http://www.w3.org/1999/xhtml", "xmlns:fb" => "http://ogp.me/ns/fb#"}
  %head
    %meta{:charset => "utf-8"}
    %meta{"http-equiv" => "X-UA-Compatible", :content => "IE=edge,chrome=1"}
    %meta{:name => "viewport", :content => "width=960, maximum-scale=1"}
    %meta{:content => "A cloud-based SaaS solution that makes it easy for nonprofits to reach and secure more donors and raise more funds.", :name => "description"}
    %meta{:content => "", :name => "author"}

    - if controller_name == "projects" and action_name == "show"
      %meta{:property => "og:image", :content => "#{@project.large_image}"}
      %meta{:property => "og:title", :content => "#{@project.project_title} | URUUT"}
      %meta{:property => 'og:description', :content=> "#{@project.title}" }
      = airbrake_javascript_notifier
    - else
      %meta{:property => "og:image", :content => "https://www.uruut.com#{asset_path('uruut-fb-og.png') }"}
      %meta{:property => "og:title", :content => ""}
      %meta{:property => "og:description", :content => "Giving You The Power To Create A Better Community"}

    %title= content_for?(:title) ? yield(:title) : "URUUT"
    = favicon_link_tag 'favicon.ico'
    = stylesheet_link_tag    "default/application", "trontastic/jquery-ui-1.8.22.custom.css", "leaflet.css", "style.css.scss", "prettyPhoto.css", :media => "all"
    = javascript_include_tag "//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js", "//ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/jquery-ui.min.js", "application", "https://js.stripe.com/v2/", "jquery.prettyPhoto.js", :media => "all"
    = filepicker_js_include_tag
    = javascript_include_tag "pages"
    = javascript_tag do
      var Settings = { facebook: { api_key: "#{Settings.facebook.api_key}" } }
      Stripe.setPublishableKey("#{STRIPE_PUBLIC_KEY}");
    /[if lt IE 9]
      = stylesheet_link_tag "ie-only.css.scss"
      = javascript_include_tag "selectivizr-min"
    = yield(:head)
    = csrf_meta_tags
  %body{:class => "#{controller_name} #{action_name}"}
    #fb-root

    #wrap
      %header.navbar
        .container
          = render 'layouts/navigation'
      = yield
      #push
    = render 'partials/footer'

= javascript_include_tag 'libs/all'

:javascript
  stripe_pub_key = "#{Settings.stripe.pub_key}";

  var updateProgressbar = function(id, value) {
    $('.progressbar' + id).progressbar({
      value: value
    });
  }

  $(function(){
    //$("img").lazyload();
    $('form fieldset p a').addClass('btn');
    $('form [id*="edit_project"]').h5Validate();
    $('form [id*="new_project"]').h5Validate();

    $('#myModal form').submit(function() {
      var valuesToSubmit = $(this).serialize();
      $.ajax({
        url: $(this).attr('action'), //sumbits it to the given url of the form
        data: valuesToSubmit,
        dataType: "JSON" // you want a difference between normal and ajax-calls, and json is standard
      }).success(function(json){
      });
      return false; // prevents normal behaviour
    });
  });
